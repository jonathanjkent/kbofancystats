z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,r), file)
}
list <- as.vector(unique(list))
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list)
teams <- unique(list)
View(team)
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list$Team)
for (i in list){
team <- i
a <- "---"
b <- 'date: "2020-03-31"'
c <- 'summary: Fancy Stats'
d <- paste0("title: ", team)
e <- "## 2019 Batting Stats"
f <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
g <- "library(tidyverse)"
h <- "library(knitr)"
j <- "library(kableExtra)"
k <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
l <- "batters <- batters[complete.cases(batters),]"
m <- "batters$Age <- as.numeric(batters$Age)"
n <- paste0('d <- batters %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
o <- "d <- d[order(-d$WAR),]"
p <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
q <- 'kable(d, digits = c(0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Name","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>%column_spec(1, bold = T, border_right = T)'
r <- "```"
s <- "## 2019 Pitching Stats"
t <- "```{r, echo=F,warning=FALSE,message=FALSE}"
u <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
v <- 'pitchers <- pitchers[complete.cases(pitchers),]'
w <- 'd <- pitchers %>% subset(Team == "LG Twins") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)'
x <- 'd <- d[order(-d$WAR),]'
y <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,r), file)
}
library(tidyverse)
setwd("~/Desktop")
batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list$Team)
for (i in list){
team <- i
a <- "---"
b <- 'date: "2020-03-31"'
c <- 'summary: Fancy Stats'
d <- paste0("title: ", team)
e <- "## 2019 Batting Stats"
f <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
g <- "library(tidyverse)"
h <- "library(knitr)"
j <- "library(kableExtra)"
k <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
l <- "batters <- batters[complete.cases(batters),]"
m <- "batters$Age <- as.numeric(batters$Age)"
n <- paste0('d <- batters %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
o <- "d <- d[order(-d$WAR),]"
p <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
q <- 'kable(d, digits = c(0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Name","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>%column_spec(1, bold = T, border_right = T)'
r <- "```"
s <- "## 2019 Pitching Stats"
t <- "```{r, echo=F,warning=FALSE,message=FALSE}"
u <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
v <- 'pitchers <- pitchers[complete.cases(pitchers),]'
w <- 'd <- pitchers %>% subset(Team == "LG Twins") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)'
x <- 'd <- d[order(-d$WAR),]'
y <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,r), file)
}
library(tidyverse)
setwd("~/Desktop")
batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list$Team)
for (i in list){
team <- i
a <- "---"
b <- 'date: "2020-03-31"'
c <- 'summary: Fancy Stats'
d <- paste0("title: ", team)
e <- "## 2019 Batting Stats"
f <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
g <- "library(tidyverse)"
h <- "library(knitr)"
j <- "library(kableExtra)"
k <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
l <- "batters <- batters[complete.cases(batters),]"
m <- "batters$Age <- as.numeric(batters$Age)"
n <- paste0('d <- batters %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
o <- "d <- d[order(-d$WAR),]"
p <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
q <- 'kable(d, digits = c(0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Name","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>%column_spec(1, bold = T, border_right = T)'
r <- "```"
s <- "## 2019 Pitching Stats"
t <- "```{r, echo=F,warning=FALSE,message=FALSE}"
u <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
v <- 'pitchers <- pitchers[complete.cases(pitchers),]'
w <- paste0('d <- pitchers %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
x <- 'd <- d[order(-d$WAR),]'
y <- 'd$Name <- paste0("[", d$Name, "](https://en.wikipedia.org/wiki/", d$Name, ")")'
z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,r), file)
}
View(batters)
id <- kim---004hye
name <- Hyun Soo Kim
name <- "Hyun Soo Kim"
id <- "kim---004hye"
library(tidyverse)
setwd("~/Desktop")
batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")
name <- "Hyun Soo Kim"
id <- "kim---004hye"
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,a,e,f,g,h,j,k,l,m), file)
name <- "Hyun Soo Kim"
id <- "kim---004hye"
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
setwd("~/Google Drive/KBO/site/content/players")
for (i in 1:nrow(list)){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
}
guy <- batters %>% subset(ID == "Ah-seop Son")
View(guy)
setwd("~/Google Drive/KBO/site/content/teams")
# Save/Read CSVs
#write_csv(pitchers, "pitchers.csv")
#write_csv(batters, "batters.csv")
pitchers <- read_csv("pitchers.csv")
batters <- read_csv("batters.csv")
setwd("~/Google Drive/KBO")
library(tidyverse)
library(rvest)
pitchers <- read_csv("pitchers.csv")
batters <- read_csv("batters.csv")
View(batters)
# Clean IDs
ids <- batters$ID
idp <- pitchers$ID
ids <- rbind(ids,idp)
ids <- batters$ID
idp <- pitchers$ID
ids <- cbind(ids,idp)
View(ids)
# Clean IDs
ids@a <- batters$ID
# Clean IDs
ids$a <- batters$ID
# Clean IDs
id$a <- batters$ID
View(id)
# Clean IDs
ids <- unique(batters$ID)
ids <- cbind(ids, unique(pitchers$id))
View(ids)
idtest <- unique(ids)
pitchers$ID <- gsub("[[:punct:]]", "", pitchers$ID, perl=TRUE)
batters$ID <- gsub("[[:punct:]]", "", batters$ID, perl=TRUE)
warnings()
View(batters)
ids <- unique(batters$ID)
ids <- cbind(ids, unique(pitchers$id))
idtest <- unique(ids)
# Clean IDs
pitchers$ID <- gsub("[[:punct:]]", "", pitchers$ID, perl=TRUE)
batters$ID <- gsub("[[:punct:]]", "", batters$ID, perl=TRUE)
# Add Park Factors
pf <- read_csv("parkfactors.csv")
batters <- batters %>% left_join(pf, by = "Team")
pitchers <- pitchers %>% left_join(pf, by = "Team")
batters$PF[is.na(batters$PF)] <- 1
pitchers$PF[is.na(pitchers$PF)] <- 1
# Fill NAs
batters$`2B`[is.na(batters$`2B`)] <- 0
batters$`3B`[is.na(batters$`3B`)] <- 0
batters$BA[is.na(batters$BA)] <- 0
batters$OBP[is.na(batters$OBP)] <- 0
batters$SLG[is.na(batters$SLG)] <- 0
batters$OPS[is.na(batters$OPS)] <- 0
batters$TB[is.na(batters$TB)] <- 0
batters$GDP[is.na(batters$GDP)] <- 0
batters$SH[is.na(batters$SH)] <- 0
batters$SF[is.na(batters$SF)] <- 0
batters$IBB[is.na(batters$IBB)] <- 0
pitchers$IBB[is.na(pitchers$IBB)] <- 0
pitchers$BK[is.na(pitchers$BK)] <- 0
pitchers$BF[is.na(pitchers$BF)] <- 0
# Create Guts
guts <- read_csv("guts.csv")
guts <- guts %>% subset(Season > 1998)
wBB <- mean(guts$wBB)
wHBP <- mean(guts$wHBP)
w1B <- mean(guts$w1B)
w2B <- mean(guts$w2B)
w3B <- mean(guts$w3B)
wHR <- mean(guts$wHR)
runSB <- mean(guts$runSB)
runCS <- mean(guts$runCS)
# Fix Basics
batters$`1B` <- batters$H-batters$`2B`-batters$`3B`-batters$HR
pitchers$IP2 <- pitchers$IP
pitchers <- pitchers %>% separate(IP, c("a", "b"))
pitchers$b[is.na(pitchers$b)] <- 0
pitchers$IP <- as.numeric(pitchers$a) + as.numeric(pitchers$b)*(1/3)
pitchers <- pitchers %>% select(-a, -b)
# Batter background
batters <- batters %>% group_by(Season) %>% summarize(lgAB = sum(AB)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgPA = sum(PA)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgSF = sum(SF)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgBB = sum(BB)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgIBB = sum(IBB)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgHBP = sum(HBP)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgH = sum(H)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lg1B = sum(`1B`)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lg2B = sum(`2B`)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lg3B = sum(`3B`)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgHR = sum(HR)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgSB = sum(SB)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgCS = sum(CS)) %>% left_join(batters, by = "Season")
batters <- batters %>% group_by(Season) %>% summarize(lgR = sum(R)) %>% left_join(batters, by = "Season")
batters$lgRPA <- batters$lgR/batters$lgPA
batters$lgwOBA <- (wBB*(batters$lgBB-batters$lgIBB) + wHBP*batters$lgHBP + w1B*batters$lg1B + w2B*batters$lg2B + w3B*batters$lg3B + wHR*batters$lgHR)/(batters$lgPA)
batters$wOBAscale <- batters$lgwOBA/.250
batters$lgOBP <- (batters$lgH + batters$lgBB - batters$lgIBB + batters$lgHBP)/(batters$lgPA)
batters$lgwSB <- (batters$lgSB * runSB + batters$lgCS * runCS) / (batters$lg1B + batters$lgBB + batters$lgHBP - batters$lgIBB)
batters$lgwRC <- (batters$lgwOBA/batters$wOBAscale+batters$lgRPA)*batters$lgPA
# Pitcher background
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgIP = sum(IP)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgR = sum(R)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgER = sum(ER)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgSO = sum(SO)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgHR = sum(HR)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgBB = sum(BB)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgHBP = sum(HBP)) %>% left_join(pitchers, by = "Season")
pitchers <- pitchers %>% group_by(Season) %>% summarize(lgGS = sum(GS)) %>% left_join(pitchers, by = "Season")
pitchers$lgGS <- pitchers$lgGS/2
gs <- pitchers %>% group_by(Season) %>% summarise(lgGS = mean(lgGS))
batters <- batters %>% left_join(gs, by = "Season")
pitchers$RPW <- 9*(pitchers$lgR/pitchers$lgIP)*1.5 + 3
rpw <- pitchers %>% group_by(Season) %>% summarise(RPW = mean(RPW))
batters <- batters %>% left_join(rpw, by = "Season")
pitchers$lgRA9 <- (pitchers$lgR/pitchers$lgIP)*9
pitchers$lgERA <- (pitchers$lgER/pitchers$lgIP)*9
pitchers$FIPcon <- pitchers$lgERA - (((13*pitchers$lgHR)+(3*(pitchers$lgBB+pitchers$lgHBP))-(2*pitchers$lgSO))/pitchers$lgIP)
pitchers$lgFIP <- ((13*pitchers$lgHR)+(3*(pitchers$lgBB+pitchers$lgHBP))-(2*pitchers$lgSO))/pitchers$lgIP + pitchers$FIPcon
pitchers$lgFIPR9 <- pitchers$lgFIP + (pitchers$lgRA9 - pitchers$lgERA)
# Batter Stats
batters$wOBA <- (wBB*(batters$BB-batters$IBB) + wHBP*batters$HBP + w1B*batters$`1B` + w2B*batters$`2B` + w3B*batters$`3B` + wHR*batters$HR)/(batters$PA)
batters$wRAA <- ((batters$wOBA-batters$lgwOBA)/batters$wOBAscale)*batters$PA
batters$WAR <- ((batters$wRAA + (batters$lgRPA - (batters$PF*(batters$lgRPA)))*batters$PA) + (batters$SB*runSB + batters$CS*runCS - batters$lgwSB * (batters$`1B` + batters$BB + batters$HBP - batters$IBB)) + (((batters$lgGS*.2345)*((batters$lgGS)/batters$lgGS))*(batters$RPW/batters$lgPA) * batters$PA))/batters$RPW
batters$wRC <- (((batters$wOBA-batters$lgwOBA)/batters$wOBAscale)+(batters$lgRPA))*batters$PA
batters$wRCplus <- (((batters$wRAA/batters$PA + batters$lgRPA) + (batters$lgRPA - batters$PF*batters$lgRPA))/(batters$lgRPA))*100
batters$BBpct <- (batters$BB/batters$PA)*100
batters$SOpct <- (batters$SO/batters$PA)*100
batters$ISO <- batters$SLG-batters$BA
batters$BABIP <- (batters$H - batters$HR)/(batters$AB - batters$SO - batters$HR + batters$SF)
# Pitcher Stats
pitchers$FIP <- ((13*pitchers$HR)+(3*(pitchers$BB+pitchers$HBP))-(2*pitchers$SO))/pitchers$IP + pitchers$FIPcon
pitchers$FIPR9 <- pitchers$FIP + (pitchers$lgRA9 - pitchers$lgERA)
pitchers$pFIPR9 <- pitchers$FIPR9/pitchers$PF
pitchers$dRPW <- (((((18 - pitchers$IP/pitchers$G)*(pitchers$lgFIPR9)) + ((pitchers$IP/pitchers$G)*pitchers$pFIPR9)) / 18) + 2)*1.5
pitchers$RAAP9 <- pitchers$lgFIPR9 - pitchers$pFIPR9
pitchers$WPGAA <- pitchers$RAAP9 / pitchers$dRPW
pitchers$RepLev <- 0.03*(1 - pitchers$GS/pitchers$G) + 0.12*(pitchers$GS/pitchers$G)
pitchers$WPGAR <- pitchers$WPGAA + pitchers$RepLev
pitchers$WAR <- pitchers$WPGAR * (pitchers$IP/9)
#pitchers$WAR <- pitchers$WAR + (-0.0009*pitchers$IP)
pitchers$BABIP <- (pitchers$H - pitchers$HR)/(pitchers$BF - pitchers$BB - pitchers$IBB - pitchers$HBP - pitchers$SO - pitchers$HR)
# Summary Tables
batters.simple <- batters %>% select(Season, Name, ID, Team, Age, G, PA, HR, OPS, BBpct, SOpct, ISO, BABIP, wRCplus, WAR)
write_csv(batters.simple, "batters_simple.csv")
pitchers.simple <- pitchers %>% select(Season, Name, ID, Team, Age, G, GS, IP2, SO9, BB9, HR9, BABIP, ERA, FIP, WAR)
write_csv(pitchers.simple, "pitchers_simple.csv")
library(tidyverse)
setwd("~/Google Drive/KBO/site/content/teams")
batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list$Team)
for (i in list){
team <- i
a <- "---"
b <- 'date: "2020-03-31"'
c <- 'summary: Fancy Stats'
d <- paste0("title: ", team)
e <- "## 2019 Batting Stats"
f <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
g <- "library(tidyverse)"
h <- "library(knitr)"
j <- "library(kableExtra)"
k <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
l <- "batters <- batters[complete.cases(batters),]"
m <- "batters$Age <- as.numeric(batters$Age)"
n <- paste0('d <- batters %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
o <- "d <- d[order(-d$WAR),]"
p <- 'd$Name <- paste0("[", d$Name, "](players/", d$ID, ")")'
q <- 'kable(d, digits = c(0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Name","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>%column_spec(1, bold = T, border_right = T)'
r <- "```"
s <- "## 2019 Pitching Stats"
t <- "```{r, echo=F,warning=FALSE,message=FALSE}"
u <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
v <- 'pitchers <- pitchers[complete.cases(pitchers),]'
w <- paste0('d <- pitchers %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season, -ID)')
x <- 'd <- d[order(-d$WAR),]'
y <- 'd$Name <- paste0("[", d$Name, "](players/", d$ID, ")")'
z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,r), file)
}
setwd("~/Google Drive/KBO/site/content/players")
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
for (i in 1:10){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
}
library(tidyverse)
setwd("~/Google Drive/KBO/site/content/teams")
batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")
list <- batters %>% group_by(Team) %>% subset(Season == "2019") %>% select(Team)
list <- unique(list$Team)
for (i in list){
team <- i
a <- "---"
b <- 'date: "2020-03-31"'
c <- 'summary: Fancy Stats'
d <- paste0("title: ", team)
e <- "## 2019 Batting Stats"
f <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
g <- "library(tidyverse)"
h <- "library(knitr)"
j <- "library(kableExtra)"
k <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
l <- "batters <- batters[complete.cases(batters),]"
m <- "batters$Age <- as.numeric(batters$Age)"
n <- paste0('d <- batters %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season)')
o <- "d <- d[order(-d$WAR),]"
p <- 'd$Name <- paste0("[", d$Name, "](/players/", d$ID, ")")'
q <- 'kable(d, digits = c(0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Name","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>%column_spec(1, bold = T, border_right = T)'
r <- "```"
s <- "## 2019 Pitching Stats"
t <- "```{r, echo=F,warning=FALSE,message=FALSE}"
u <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
v <- 'pitchers <- pitchers[complete.cases(pitchers),]'
w <- paste0('d <- pitchers %>% subset(Team == "', team, '") %>% subset(Season == "2019") %>% select(-Team, -Season)')
x <- 'd <- d[order(-d$WAR),]'
y <- 'd$Name <- paste0("[", d$Name, "](/players/", d$ID, ")")'
ab <- "d <- d %>% select(-ID)"
z <- 'kable(d, digits = c(0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Name","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T) %>% column_spec(1, bold = T, border_right = T)'
file <- paste0(gsub("[[:space:]]", "", team), ".rmd")
writeLines(c(a,b,c,d,a,e,f,g,h,j,k,l,m,n,o,p,ab,q,r,s,t,u,v,w,x,y,ab,z,r), file)
}
setwd("~/Google Drive/KBO/site/content/players")
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
for (i in 1:10){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
}
setwd("~/Google Drive/KBO/site/content/players")
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
for (i in 1:length(list)){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
}
length(list)
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
length(list)
setwd("~/Google Drive/KBO/site/content/players")
list <- batters %>% subset(Season == "2019") %>% select(Name, ID)
for (i in 1:nrow(list)){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'batters <- read_csv("~/Google Drive/KBO/batters_simple.csv")'
h <- 'batters$Age <- as.numeric(batters$Age)'
j <- paste0('d <- batters %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,3,1,1,3,3,1,2), col.names = c("Season","Team","Age","G","PA","HR","OPS","BB%","SO%","ISO","BABIP","wRC+","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,h,j,k,l,m), file)
}
pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")
list <- pitchers %>% subset(Season == "2019") %>% select(Name, ID)
View(list)
setwd("~/Google Drive/KBO/site/content/players")
pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")
list <- pitchers %>% subset(Season == "2019") %>% select(Name, ID)
for (i in 1:nrow(list)){
name <- list$Name[i]
id <- list$ID[i]
a <- "---"
b <- paste0('title: ', name)
c <- "```{r pressure, echo=F,warning=FALSE,message=FALSE}"
d <- "library(tidyverse)"
e <- "library(knitr)"
f <- "library(kableExtra)"
g <- 'pitchers <- read_csv("~/Google Drive/KBO/pitchers_simple.csv")'
j <- paste0('d <- pitchers %>% subset(ID == "', id, '") %>% select(-Name, -ID)')
k <- 'd <- d[order(-d$Season),]'
l <- 'kable(d, digits = c(0,0,0,0,0,0,1,1,1,3,2,2,2), col.names = c("Season","Team","Age","G","GS","IP","K/9","BB/9","HR/9","BABIP","ERA","FIP","WAR")) %>% kable_styling(bootstrap_options = c("striped", "hover"), fixed_thead = T)'
m <- "```"
file <- paste0(gsub("[[:space:]]", "", id), ".rmd")
writeLines(c(a,b,a,c,d,e,f,g,j,k,l,m), file)
}
library(tidyverse)
library(rvest)
setwd("~/Google Drive/KBO")
library(blogdown)
library(rmarkdown)
setwd("~/Google Drive/KBO/kbofancystats")
#render_site()
serve_site()
library(blogdown)
library(rmarkdown)
setwd("~/Google Drive/KBO/kbofancystats")
#render_site()
serve_site()
